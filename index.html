<!doctype html>
<html lang="bg">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
 <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<title>Lifehouse Semkovo — Къща за гости</title>

<!-- Firebase (compat build) -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<style>
  :root{
    --glass-bg:rgba(20,20,20,.45);
    --text:#f5f5f5;
    --accent:#ffd166;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}

  /* Fullscreen hero with background */
  .hero{
    position:relative;min-height:100%;
    background:url("lifehouse-semkovo.jpg") center/cover no-repeat fixed;
    color:#fff;
  }

  /* NAV */
.nav{
  position:fixed; top:0; left:0; right:0; z-index:120;
  display:flex; align-items:center; gap:12px;
  padding:10px 14px;
  border:1px solid rgba(255,255,255,.25);
  background:var(--glass-bg); backdrop-filter:saturate(140%) blur(8px);
}

  .brand{font-weight:700;letter-spacing:.4px;white-space:nowrap}
  .brand img {height:100%;max-height:48px;width:auto;display:block}
  .burger{
    width:42px;height:38px;border-radius:10px;border:1px solid rgba(255,255,255,.25);
    display:grid;place-items:center;background:transparent;color:#fff;cursor:pointer
  }
  .burger span,.burger::before,.burger::after{
    content:"";display:block;width:20px;height:2px;background:#fff;border-radius:2px
  }
  .burger span{margin:4px 0}

  /* Drawer (мобилно меню) */
  .drawer{
    position:fixed; right:10px; top:calc(10px + 48px);
    width:clamp(60px,32vw,300px); max-height:70vh; overflow:auto;
    padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.25);
    background:var(--glass-bg); backdrop-filter:saturate(140%) blur(10px);
    z-index:110; display:none;
  }
  .drawer a, .drawer button{
    display:block;color:var(--text);text-decoration:none;
    padding:14px 12px;margin:4px 0;border-radius:10px;font-size:16px;font-weight:600;
    width:100%; text-align:right; background:transparent; border:none; cursor:pointer;
  }
  .drawer a:hover, .drawer button:hover{background:rgba(255,255,255,.1)}
  .drawer.show{display:block}

  /* Headline */
  .headline{
    position:absolute;left:50%;top:65%;transform:translate(-50%,-50%);
    text-align:center;padding:14px 18px;border-radius:16px;
    background:rgba(0,0,0,.35);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.2)
  }
  .headline h1{margin:0 0 6px 0;font-size:28px}
  .headline p{margin:0;font-size:14px;opacity:.95}

  /* Sections */
  section{min-height:60vh;padding:60px 18px;color:#fff}
  #about,#gallery,#contact{background:rgba(0,0,0,.35)}
  .btn-primary{display:inline-block;margin-top:10px;background:var(--accent);color:#222;padding:10px 14px;border-radius:12px;text-decoration:none;font-weight:600}

  /* Modal */
  .modal{
    position:fixed; inset:0; background:rgba(0,0,0,.55);
    display:none; align-items:center; justify-content:center; z-index:200; padding:14px
  }
  .modal.show{display:flex}
  .modal-card{
    position:relative; width:min(1100px,96vw); height:min(740px,92vh); padding:14px;
    border-radius:18px; background:#111; box-shadow:0 10px 40px rgba(0,0,0,.5);
    color:#eee; border:1px solid #2a2a2a; overflow:hidden;
  }
  .modal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .x{border:1px solid #333;background:#181818;color:#ddd;border-radius:10px;padding:8px 12px;cursor:pointer}


  /* Админ бутон – долу вдясно на сайта (не fixed) */
  .admin-hotspot{
    display:block;
    width:64px;
    height:64px;
    background:transparent;
    border:none;
    cursor:pointer;
    opacity:0;          /* невидим, но кликаем */
    margin-left:auto;
    margin-right:0;
    margin-top:40px;
    margin-bottom:0;
  }
  .admin-hotspot:focus-visible{
    outline:2px dashed rgba(255,255,255,.6);
    outline-offset:4px;
  }

  /* Admin drawer (част от потока, вдясно долу) */
  .admin-drawer{
    position:relative;
    margin-left:auto;
    margin-right:0;
    width:clamp(240px, 60vw, 360px);
    max-height:70vh;
    overflow:auto;
    padding:12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.25);
    background:var(--glass-bg);
    backdrop-filter:saturate(140%) blur(10px);
    display:none;
    color:var(--text);
  }
  .admin-drawer.show{ display:block }

  .admin-drawer-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px }
  .admin-close{ cursor:pointer; border:1px solid #333; background:#1b1b1b; color:#eee; border-radius:10px; padding:6px 10px }

  .admin-drawer-body button{
    display:block; width:100%; text-align:left; cursor:pointer;
    border:none; background:transparent; color:var(--text);
    padding:12px; border-radius:10px; font-weight:600;
  }
  .admin-drawer-body button:hover{ background:rgba(255,255,255,.1) }

  /* Социалки в нав бара */
  .nav .social{
    display:flex;
    align-items:center;
    justify-content:center;
    width:36px;
    height:36px;
    border-radius:50%;
    color:#ccc;
    transition:color .25s, background .25s;
  }
  .nav .social:hover{ background:rgba(255,255,255,.1); }
  .nav .social.fb:hover{ color:#1877F2; }
  .nav .social.ig:hover{ color:#E4405F; }

  /* Фиксирани контакти */
  .fixed-contacts{
    position:fixed;
    bottom:20px;
    right:20px;
    display:flex;
    flex-direction:column;
    gap:10px;
    z-index:150;
  }
  .fixed-contacts .contact-btn{
    width:44px;
    height:44px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.4);
    color:#ccc;
    text-decoration:none;
    transition:color .25s, background .25s;
  }
  .fixed-contacts .contact-btn:hover{ background:rgba(255,255,255,.1); }
  .fixed-contacts .contact-btn.tel:hover{ color:#34A853; }
  .fixed-contacts .contact-btn.wa:hover{ color:#25D366; }
  .fixed-contacts .contact-btn.viber:hover{ color:#7360F2; }

  #rules, #reviews{
    background: rgba(50,50,50,.35);
    color:#fff;
    padding:60px 18px;
    min-height:40vh;
  }
  #about{
    background:rgba(0,0,0,.35);
    color:#fff;
    padding:60px 18px;
  }
  .about-wrap{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    gap:20px;
  }
  .about-text{flex:1; min-width:250px;}
  .about-img{flex:1; min-width:250px; text-align:center;}
  .about-img img{max-width:100%; height:auto; border-radius:12px;}
  @media (max-width:768px){
    .about-wrap{flex-direction:column;}
    .about-img{order:-1;}
  }

  .site-footer{
    background:#fff;
    padding:30px 0;
    text-align:center;
  }
  .site-footer .footer-medal img{
    max-width:160px;
    height:auto;
    display:inline-block;
  }

  /* ===== Desktop меню вдясно ===== */
  .nav-links{display:none;} /* скрито по подразбиране (мобилно) */
  @media (min-width:769px){
    .burger, .drawer{display:none !important;}
    .nav-links{display:flex;gap:16px;margin-left:auto;}
    .nav-links a{
      color:var(--text);
      text-decoration:none;
      font-weight:600;
      padding:8px 12px;
      border-radius:8px;
    }
    .nav-links a:hover{background:rgba(255,255,255,.1);}
  }
 @media (max-width: 768px) {
  
  .burger {
    position: absolute;
    right: 14px;   /* същото отстояние като padding-а на nav */
    top: 50%;
    transform: translateY(-50%);
    margin: 0;     /* премахваме auto марджини */
  }
}
.about-img img {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 1s ease, transform 1s ease;
}
.about-img img.visible {
  opacity: 1;
  transform: translateY(0);
}

.reviews-list {
  display: flex;
  flex-direction: column;
  gap: 24px;
  max-width: 720px;
  margin: 0 auto;
}
.review-item {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 14px;
  padding: 16px;
}
.review-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}
.review-avatar svg {
  width: 100%;
  height: 100%;
  display: block;
}
.review-content { flex: 1; }
.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}
.review-name { font-weight: 600; color: var(--accent); }
.review-stars { color: gold; font-size: 16px; letter-spacing: 1px; }
.review-text { margin: 0; color: #f0f0f0; line-height: 1.5; }


.footer-signature {
  display: block;
  text-align: left;
  margin: 30px 20px;
  font-size: 12px;
  color: #555;
  text-decoration: none;
  opacity: 0.9;
  white-space: nowrap;
}
.footer-signature strong {
  color: #444;
}
.footer-signature:hover {
  opacity: 1;
  text-decoration: underline;
}
#reviews {
  position: relative;
  background: rgba(50,50,50,.35);
  color: #fff;
  padding: 40px 0;
  height: 80vh;              /* фиксирана височина */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.reviews-scroll {
  overflow-y: auto;
  width: 100%;
  max-width: 720px;
  padding: 0 18px;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}
.reviews-list {
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.review-item {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.8s ease;
}
.review-item.visible {
  opacity: 1;
  transform: translateY(0);
}
.review-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}
.review-avatar svg {
  width: 100%;
  height: 100%;
  display: block;
}
.review-content { flex: 1; }
.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}
.review-name { font-weight: 600; color: var(--accent); }
.review-stars { color: gold; font-size: 16px; letter-spacing: 1px; }
.review-text { margin: 0; color: #f0f0f0; line-height: 1.5; }

#places {
  background: rgba(70,70,70,.35);
  color: #fff;
  padding: 60px 18px;
  min-height: 40vh;
}

.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 16px;
  max-width: 960px;
  margin: 0 auto;
  padding: 20px;
}
.gallery-grid img {
  width: 100%;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .3s, filter .3s;
}
.gallery-grid img:hover {
  transform: scale(1.05);
  filter: brightness(1.1);
}

/* Модал за голямо изображение */
#imgModal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.8);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
}
#imgModal.show { display: flex; }
#imgModal img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 12px;
}
#places {
  background: rgba(85,85,85,.35);
  color: #fff;
  padding: 60px 18px;
}
.place-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
  margin: 40px 0;
}
.place-row.alt {
  flex-direction: row-reverse; /* редува подредбата */
}
.place-row img {
  width: 45%;
  max-width: 480px;
  border-radius: 14px;
  box-shadow: 0 4px 14px rgba(0,0,0,.4);
}
.place-text {
  width: 45%;
}
.place-text h3 {
  margin-top: 0;
  color: var(--accent);
}
.place-text p {
  color: #eee;
  line-height: 1.6;
}

@media (max-width: 768px) {
  .place-row, .place-row.alt {
    flex-direction: column;
  }
  .place-row img, .place-text {
    width: 100%;
  }
}
/* Всеки четен ред в секцията #places да е огледален */
#places .place-row:nth-child(even) {
  flex-direction: row-reverse;
}
/* На мобилно всички редове стават вертикални */
@media (max-width: 768px){
  #places .place-row{ flex-direction: column !important; }
}
/* ===== AIRBNB-LIKE CALENDAR ===== */
.abnb-modal{position:fixed;inset:0;display:none;z-index:9999}
.abnb-modal.show{display:block}
.abnb-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
.abnb-sheet{position:absolute;inset:auto 0 0 0;background:#fff;border-radius:16px 16px 0 0;max-height:92vh;overflow:hidden;box-shadow:0 -20px 60px rgba(0,0,0,.2)}
@media (min-width:900px){.abnb-sheet{inset:5vh auto auto;left:50%;transform:translateX(-50%);width:min(980px,92vw);border-radius:16px}}
.abnb-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #eee}
.abnb-x{border:0;background:transparent;font-size:20px;cursor:pointer;opacity:.7}
.abnb-nav{display:flex;gap:8px;align-items:center}
.abnb-month{min-width:220px;text-align:center;font-weight:700;margin:0}
.abnb-navbtn{border:1px solid #ddd;background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.abnb-wrap{display:grid;grid-template-columns:1fr 300px;gap:16px;padding:16px}
@media (max-width:900px){.abnb-wrap{grid-template-columns:1fr}}
.abnb-cal{user-select:none}
.abnb-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.abnb-dow{opacity:.6;font-size:12px;padding:6px 0;text-align:center}
.abnb-day{position:relative;border:1px solid #eee;border-radius:12px;padding:8px;height:78px;cursor:pointer;background:#fff;display:flex;flex-direction:column;justify-content:space-between}
.abnb-day:hover{box-shadow:0 0 0 2px #00000010}
.abnb-num{font-weight:600;font-size:12px;opacity:.85}
.abnb-price{font-size:11px;opacity:.75;align-self:flex-end}
.abnb-day.out{opacity:.35}
.abnb-day.busy{background:#f5f5f5}
.abnb-day.busy .abnb-price{opacity:.55;text-decoration:line-through}
.abnb-day.today{outline:2px solid #00000015}
.abnb-day.selected{box-shadow:0 0 0 2px #111}
.abnb-day.in-range{background:#111;color:#fff;border-color:#111}
.abnb-day.in-range .abnb-price{color:#fff;opacity:.9}
.abnb-side{display:flex;flex-direction:column;gap:12px}
.abnb-range{display:flex;flex-direction:column;gap:4px;background:#fafafa;border:1px solid #eee;border-radius:12px;padding:10px}
.abnb-note textarea{width:100%;min-height:84px;border:1px solid #ddd;border-radius:10px;padding:8px;resize:vertical}
.abnb-price input{width:100%;border:1px solid #ddd;border-radius:10px;padding:8px}
.abnb-btn{border:0;background:#111;color:#fff;border-radius:12px;padding:10px 12px;cursor:pointer}
.abnb-btn.ghost{background:#f3f3f3;color:#111}
.abnb-actions{display:flex;flex-wrap:wrap;gap:8px}
.abnb-hint{opacity:.6;font-size:12px;margin:0}
.admin-only{display:none}
body.admin .admin-only{display:inline-block}
/* Fix z-index for Airbnb modal */
.abnb-modal{ position:fixed; inset:0; z-index:9999; }
.abnb-sheet{ position:absolute; z-index:2; }   /* листът над бекдропа */
.abnb-backdrop{ position:absolute; z-index:1; }/* бекдропът отдолу */

/* --- Mobile fixes for the Airbnb calendar (match .abnb-* used in index.html) --- */

/* Модалът вече е с висок z-index при теб, оставяме така */

/* Листът (панелът) да запълни височината и да има две редици:
   1) header (фиксиран)
   2) body (скролируем) */
.abnb-sheet{
  max-height: 100dvh;
  height: 100dvh;                       /* fallback на some Android */
  display: grid;
  grid-template-rows: auto 1fr;         /* header | body */
  border-radius: 16px 16px 0 0;
}

/* Тялото да скролира, вместо целия модал да се „реже“ */
.abnb-wrap{
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding: 16px;
}

/* Лентата с бутони да е винаги видима в края на aside */
.abnb-actions{
  position: sticky;
  bottom: 0;
  background: #fff;
  padding-top: 12px;
  border-top: 1px solid #eee;
  z-index: 1;
}

/* По-компактен ден на мобилно, за да се побира повече */
@media (max-width: 900px){
  .abnb-day{ height: 68px; }
}

/* Когато се вдигне клавиатурата – пазим височината на панела */
body.kb-open .abnb-sheet{
  max-height: 100dvh;
  height: 100dvh;
}


#calendarPanel, .calendar-panel, .cal-panel {
  width: min(820px, 100%);
  max-height: 100dvh;           /* новите моб. браузъри */
  height: 100%;
  background: #fff;
  border-radius: 14px;
  overflow: hidden;              /* скрол ще е вътре */
  display: grid;
  grid-template-rows: auto 1fr auto; /* header | body | actions */
}

/* Скрол само в тялото, за да не се реже */
#calendarScroll, .calendar-body, .cal-body {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  max-height: 100%;
}

/* Лента с бутони залепена долу и винаги видима */
#calActions, .calendar-actions, .cal-actions {
  position: sticky;
  bottom: 0;
  background: #fff;
  border-top: 1px solid #eee;
  padding: 12px;
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  z-index: 1;
}

/* Когато се вдигне клавиатурата – дайте още място */
body.kb-open #calendarPanel,
body.kb-open .calendar-panel,
body.kb-open .cal-panel {
  max-height: 100dvh;
}

@media (max-width: 768px){
  body.admin .admin-only { display: inline-flex !important; }
  .admin-only, #calActions .btn, .calendar-actions .btn { min-height: 40px; }
}
/* --- Read-only режим за НЕ-админи --- */
body:not(.admin) .abnb-side {            /* дясната колона: От–До, бележка, цена */
  display: none !important;
}
body:not(.admin) .abnb-actions {          /* лента с бутони (Запази/Заето/Изчисти) */
  display: none !important;
}
body:not(.admin) .abnb-day {              /* забранява кликове по дните */
  pointer-events: none;
  -webkit-user-select: none;
  user-select: none;
  opacity: 1;                             /* не правим календара прозрачен */
  cursor: default;
}
/* --- По-тъмно оцветяване на заетите дати --- */
.abnb-day.busy,
.abnb-day[data-busy="true"] {
  background-color: #d8d8d8 !important;   /* малко по-тъмен сив фон */
  color: #555 !important;                 /* по-тъмен текст */
  opacity: 1 !important;                  /* да не е избледнял */
}
/* ГАЛЕРИЯ – винаги 3 на ред */
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  max-width: 960px;
  margin: 0 auto;
  padding: 20px;
}
.gallery-grid img {
  width: 100%;
  height: auto;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .3s, filter .3s;
}
.gallery-grid img:hover {
  transform: scale(1.03);
  filter: brightness(1.06);
}

/* Модал – изображението запълва целия екран без изкривяване */
#imgModal img {
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  object-fit: contain;
  border-radius: 0;
}
.hero-content {
  background-color: rgba(255, 255, 255, 0.18); /* по-светла и по-прозрачна */
  backdrop-filter: blur(8px);
  border-radius: 18px;
  color: #222;
  padding: 24px 32px;
  box-shadow: 0 0 25px rgba(0,0,0,0.25);
  transition: background-color .3s, box-shadow .3s;
}
.hero-content:hover {
  background-color: rgba(255, 255, 255, 0.28);
  box-shadow: 0 0 35px rgba(0,0,0,0.3);
}
.hero-content {
  opacity: 0;
  pointer-events: none; /* да не може да се клика */
}
.headline {
  display: none !important;
}
/* Плавна поява на снимките в галерията */
.gallery-grid img{
  opacity: 0;
  transform: translateY(12px);
  transition: opacity .6s ease, transform .6s ease, filter .3s;
}
.gallery-grid img.visible{
  opacity: 1;
  transform: translateY(0);
}

 /* Навигационни стрелки в модала */
#imgModal .img-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  height: 48px;
  width: 48px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,.35);
  background: rgba(0,0,0,.35);
  color: #fff;
  display: grid;
  place-items: center;
  font-size: 26px;
  cursor: pointer;
  user-select: none;
}
#imgModal .img-prev { left: 18px; }
#imgModal .img-next { right: 18px; }
#imgModal:not(.show) .img-nav { display: none; }
#imgModal .img-nav:focus-visible { outline: 2px dashed #fff; outline-offset: 3px; }
 #imgModal .img-nav { z-index: 5; } /* да е над изображението */



 
</style>
</head>
<body>

  <div class="hero" id="home">
    <!-- NAV -->
    <nav class="nav">
      <!-- Хамбургер (само мобилно; скрит на десктоп с @media) -->
      <button class="burger" id="burger" aria-label="Меню" aria-expanded="false"><span></span></button>

      <!-- ПИН към Google Maps -->
      <a href="https://www.google.com/maps/place/Life+House/@42.0479645,23.5272436,142m/data=!3m1!1e3!4m17!1m7!3m6!1s0x14ab05c2b76ace83:0x9ce278f0d33929d!2sSemkovo+Mountain+Resort!8m2!3d42.0446093!4d23.5258354!16s%2Fg%2F11jm7lr6cv!3m8!1s0x14ab05371801afd1:0x1abbb9a791e4b886!5m2!4m1!1i2!8m2!3d42.0481271!4d23.5274758!16s%2Fg%2F11f8mg2m1x?entry=ttu"
         target="_blank" aria-label="Google Maps">
        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16" style="color:#ffd166;cursor:pointer">
          <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
        </svg>
      </a>

      <!-- Социални бутони -->
      <a href="https://www.facebook.com/profile.php?id=100057135262751&locale=bg_BG" target="_blank" class="social fb" aria-label="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
          <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 5 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.507 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.891h-2.33v6.987C18.343 21.128 22 17 22 12z"/>
        </svg>
      </a>
      <a href="https://www.instagram.com/lifehouse_semkovo/" target="_blank" class="social ig" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 2C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm10 2c1.654 0 3 1.346 3 3v10c0 1.654-1.346 3-3 3H7c-1.654 0-3-1.346-3-3V7c0-1.654 1.346-3 3-3h10zm-5 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm4.5-.75a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"/>
        </svg>
      </a>

      <!-- Десктоп навигация вдясно (скрита на мобилно) -->
      <div class="nav-links">
        <a href="#"data-open-cal id="openCalFromMenuDesktop">Календар</a>
        <a href="#about">История</a>
        <a href="#places">Наоколо</a>
        <a href="#gallery">Галерия</a>
        <a href="#reviews">Отзиви</a>
      </div>

      <!-- Мобилно чекмедже (линковете остават за мобилно) -->
      <div class="drawer" id="drawer" role="menu" aria-hidden="true">
        <a href="#"data-open-cal id="openCalFromMenu" role="menuitem">Календар</a>
        <a href="#about" role="menuitem">История</a>
        <a href="#places" role="menuitem">Наоколо</a>
        <a href="#gallery" role="menuitem">Галерия</a>
        <a href="#reviews" role="menuitem">Отзиви</a>
      </div>
    </nav>

    <!-- Callout -->
    <div class="headline">
      <h1> LifeHouse Semkovo</h1>
      <p>Домашен уют с модерни удобства на крачка от дивата природа или нещо такова....</p>
      <a class="btn-primary" id="openCalCta" href="#">свободни дати</a>
    </div>

  </div>

  <section id="about">
    <div class="about-wrap">
      <div class="about-text">
        <h2>История</h2>
        <p>Уютна дървена къща с модерни удобства в сърцето на Семково.</p>
      </div>
      <div class="about-img">
        <img src="zanas.webp" alt="Къщата LifeHouse Semkovo" loading="lazy" decoding="async">

      </div>
    </div>
   <!-- Видео в края на секцията История -->
<video class="history-video" autoplay muted loop playsinline preload="none" poster="zanas.webp">
  <source src="lhvideo.mp4" type="video/mp4">
  Твоят браузър не поддържа видео.
</video>

<style>
.history-video {
  display: block;
  width: 100%;
  height: auto;
  margin-top: 30px;
  border-radius: 0;
  object-fit: cover;
}
</style>

  </section>

<section id="gallery">
  <h2>Галерия</h2>

  <h3>Всекидневна</h3>
  <div class="gallery-grid">
    <img src="vsekidnevna1.webp" alt="Всекидневна 1" loading="lazy" decoding="async">
    <img src="vsekidnevna2.webp" alt="Всекидневна 2" loading="lazy" decoding="async">
    <img src="vsekidnevna3.webp" alt="Всекидневна 3" loading="lazy" decoding="async">
    <img src="vsekidnevna4.webp" alt="Всекидневна 4" loading="lazy" decoding="async">
    <img src="vsekidnevna5.webp" alt="Всекидневна 5" loading="lazy" decoding="async">
    <img src="vsekidnevna6.webp" alt="Всекидневна 6" loading="lazy" decoding="async">
    <img src="vsekidnevna7.webp" alt="Всекидневна 7" loading="lazy" decoding="async">
    <img src="vsekidnevna8.webp" alt="Всекидневна 8" loading="lazy" decoding="async">
    <img src="vsekidnevna9.webp" alt="Всекидневна 9" loading="lazy" decoding="async">
  </div>

  <h3>Навън</h3>
  <div class="gallery-grid">
    
    <img src="navun2.webp" alt="Навън 2" loading="lazy" decoding="async">
    <img src="navun3.webp" alt="Навън 3" loading="lazy" decoding="async">
    <img src="navun6.webp" alt="Навън 6" loading="lazy" decoding="async">
    <img src="navun7.webp" alt="Навън 7" loading="lazy" decoding="async">
    <img src="navun1.webp" alt="Навън 1" loading="lazy" decoding="async">
    <img src="navun8.webp" alt="Навън 8" loading="lazy" decoding="async">
  
  </div>

  <h3>Спални</h3>
  <div class="gallery-grid">
    <img src="spalni1.webp" alt="Спалня 1" loading="lazy" decoding="async">
    <img src="spalni2.webp" alt="Спалня 2" loading="lazy" decoding="async">
    <img src="spalni3.webp" alt="Спалня 3" loading="lazy" decoding="async">
    <img src="spalni4.webp" alt="Спалня 4" loading="lazy" decoding="async">
    <img src="spalni5.webp" alt="Спалня 5" loading="lazy" decoding="async">
    <img src="spalni6.webp" alt="Спалня 6" loading="lazy" decoding="async">
    <img src="spalni7.webp" alt="Спалня 7" loading="lazy" decoding="async">
    <img src="spalni8.webp" alt="Спалня 8" loading="lazy" decoding="async">
    <img src="spalni9.webp" alt="Спалня 9" loading="lazy" decoding="async">
  </div>

  <h3>Баня</h3>
  <div class="gallery-grid">
    <img src="banya1.webp" alt="Баня 1" loading="lazy" decoding="async">
    <img src="banya3.webp" alt="Баня 3" loading="lazy" decoding="async">  
    <img src="banya4.webp" alt="Баня 4" loading="lazy" decoding="async">
    <img src="banya5.webp" alt="Баня 5" loading="lazy" decoding="async">
    <img src="banya2.webp" alt="Баня 2" loading="lazy" decoding="async">
    <img src="banya6.webp" alt="Баня 6" loading="lazy" decoding="async">
   
  </div>
</section>


<section id="places">
  <h2>Забележителности</h2>

  <div class="place-row">
    <img src="z1.webp" alt="Забележителност 1">
    <div class="place-text">
      <h3>Фън парк Белица</h3>
      <p>Адреналин и прохлада през лятото.</p>
    </div>
  </div>

  <div class="place-row alt">
    <div class="place-text">
      <h3>Екопътека Семково</h3>
      <p>Горска пътека с панорамни гледки към Пирин, подходяща за разходки и снимки.</p>
    </div>
    <img src="z2.webp" alt="Забележителност 2">
  </div>

  <div class="place-row">
    <img src="z3.png" alt="Забележителност 3">
    <div class="place-text">
      <h3>Панорамна площадка Орлово око</h3>
      <p>Изключителна гледка към планината и долината, достъпна пеша или с джип.</p>
    </div>
  </div>

  <div class="place-row alt">
    <div class="place-text">
      <h3>Парк на тацуващите мечки</h3>
      <p>Уникална възможност да наблщдавате мечките в естествения им хабитат.</p>
    </div>
    <img src="z4.webp" alt="Забележителност 4">
  </div>

  <div class="place-row">
    <img src="z5.webp" alt="Забележителност 5">
    <div class="place-text">
      <h3>Семково езеро</h3>
      <p>Кристални води, обградени от борове – рай за фотографите и туристите.</p>
    </div>
  </div>

  <div class="place-row alt">
    <div class="place-text">
      <h3>Ски писта Семково</h3>
      <p>Идеална за зимни спортове, със спокоен трафик и чудесни условия за начинаещи.</p>
    </div>
    <img src="z6.webp" alt="Забележителност 6">
  </div>
</section>



  <!-- нова секция Отзиви -->
<section id="reviews">
  <h2>Отзиви</h2>
  <div class="reviews-scroll">
    <div class="reviews-list">

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#555"/><circle cx="50" cy="38" r="18" fill="#888"/><path d="M10 95a40 40 0 0180 0z" fill="#777"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Lev</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">It's awesome home. It's located right inside of the beautiful forest, we didn't want to leave it at all.</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#444"/><circle cx="50" cy="38" r="18" fill="#777"/><path d="M10 95a40 40 0 0180 0z" fill="#666"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">George</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">A cozy cottage in a quiet, less-traveled part of the mountain. Perfect for larger groups.</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#333"/><circle cx="50" cy="38" r="18" fill="#666"/><path d="M10 95a40 40 0 0180 0z" fill="#555"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Maria</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">Lovely place with amazing views and friendly hosts. Highly recommended!</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#464"/><circle cx="50" cy="38" r="18" fill="#797"/><path d="M10 95a40 40 0 0180 0z" fill="#585"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Ivan</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">Топло, уютно и с много приятна атмосфера. Камината прави вечерите вълшебни.</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#355"/><circle cx="50" cy="38" r="18" fill="#678"/><path d="M10 95a40 40 0 0180 0z" fill="#567"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Sofia</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">Everything was spotless clean and beautifully arranged. Perfect for a weekend escape.</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#633"/><circle cx="50" cy="38" r="18" fill="#866"/><path d="M10 95a40 40 0 0180 0z" fill="#755"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Nikolay</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">The hosts were incredibly kind and helpful. We’ll definitely return in winter!</p>
        </div>
      </div>

      <div class="review-item">
        <div class="review-avatar">
          <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#555"/><circle cx="50" cy="38" r="18" fill="#999"/><path d="M10 95a40 40 0 0180 0z" fill="#777"/></svg>
        </div>
        <div class="review-content">
          <div class="review-header"><span class="review-name">Petya</span><span class="review-stars">★★★★★</span></div>
          <p class="review-text">Спокойствие, природа и уют – точно както си го представяхме. Прекрасно място!</p>
        </div>
      </div>

    </div>
  </div>
</section>

  <section id="contact"><h2></h2><p>Тел: +359988988623 </p></section>

  <!-- Admin Drawer (част от потока на страницата) -->
  <div class="admin-drawer" id="adminDrawer" aria-hidden="true">
    <div class="admin-drawer-head">
      <strong>Админ панел</strong>
      <button class="admin-close" id="adminClose" aria-label="Затвори">×</button>
    </div>
    <div class="admin-drawer-body">
      <button id="adminLogin">Админ вход</button>
      <button id="adminLogout">Изход</button>
      <div id="adminBadge" class="admin-badge">Статус: гост</div>
    </div>
  </div>

  <!-- Невидим бутон долу вдясно (в края на сайта) -->
  <button class="admin-hotspot" id="adminHotspot" aria-label="Админ панел"></button>



  <!-- ===== AIRBNB CALENDAR MODAL ===== -->
<div id="airCalModal" class="abnb-modal" aria-hidden="true">
  <div class="abnb-sheet">
    <header class="abnb-head">
      <button class="abnb-x" id="abnbClose" aria-label="Close">✕</button>
      <div class="abnb-nav">
        <button id="abnbPrev" class="abnb-navbtn" aria-label="Prev">‹</button>
        <h3 id="abnbMonthLabel" class="abnb-month">—</h3>
        <button id="abnbNext" class="abnb-navbtn" aria-label="Next">›</button>
      </div>
    </header>

    <div class="abnb-wrap">
      <div class="abnb-cal" id="abnbCal">
        <!-- рендерира се от JS -->
      </div>

      <aside class="abnb-side">
        <div class="abnb-range">
          <div><strong>От:</strong> <span id="abnbFrom">—</span></div>
          <div><strong>До:</strong> <span id="abnbTo">—</span></div>
        </div>

        <div class="abnb-note">
          <label>Бележка (връзка към датите)</label>
          <textarea id="abnbNote" placeholder="напр. „Резервирано от Иван“"></textarea>
          <button class="abnb-btn admin-only" id="abnbSaveNote">Запази бележка</button>
        </div>

        <div class="abnb-price">
          <label>Цена за нощувка (лв.)</label>
          <input id="abnbPrice" type="number" inputmode="numeric" min="0" step="1" placeholder="350">
          <button class="abnb-btn admin-only" id="abnbSetPrice">Задай цена</button>
        </div>

        <div class="abnb-actions">
          <button class="abnb-btn admin-only" id="abnbMarkBusy">Маркирай Заето</button>
          <button class="abnb-btn ghost admin-only" id="abnbClearBusy">Освободи</button>
          <button class="abnb-btn ghost" id="abnbClearSel">Изчисти избора</button>
        </div>


      </aside>
    </div>
  </div>
  <div class="abnb-backdrop" id="abnbBackdrop"></div>
</div>

  <!-- ===== Основни скриптове ===== -->
  <script>
  /* ===== Firebase INIT (сложи своя config при нужда) ===== */
const firebaseConfig = {

  apiKey: "AIzaSyA2bfkzHl6IoLzy9Bz9gli2kL9airHuUCw",

  authDomain: "lhv2-48243.firebaseapp.com",

  projectId: "lhv2-48243",

  storageBucket: "lhv2-48243.firebasestorage.app",

  messagingSenderId: "394167863285",

  appId: "1:394167863285:web:362b103f23f69d8dfbc2bc"

};



  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db   = firebase.firestore();

  /* ===== Drawer (мобилно) ===== */
  const burger = document.getElementById('burger');
  const drawer = document.getElementById('drawer'); 
  burger && burger.addEventListener('click',()=>{
    const open = drawer.classList.toggle('show');
    burger.setAttribute('aria-expanded', String(open));
    drawer.setAttribute('aria-hidden', String(!open));
  });
  document.addEventListener('click', (e)=>{
    if (drawer && !drawer.contains(e.target) && !burger?.contains(e.target)) {
      drawer.classList.remove('show');
      burger?.setAttribute('aria-expanded','false');
    }
  });
 </script>
<script>
/* ===== Airbnb-like Calendar (Firestore) ===== */
/* СХЕМА: Collection 'calendar' → doc 'YYYY-MM' → field 'days' = {
   'YYYY-MM-DD': { busy: true|false, price: number|null, note: string|null }
} */
const CAL_COLL = 'calendar_v2';

const $ = (s, r=document) => r.querySelector(s);
const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
const fmt = (d) => d.toISOString().slice(0,10);
const pad = (n) => (n<10?'0':'')+n;

let cur = new Date();          // текущ показан месец
cur.setDate(1);
let selStart = null, selEnd = null;
let monthData = {};            // map по ден
let isAdmin = false;           // ще се обнови от auth

// --- Open/Close
const airCalModal = $('#airCalModal');
const abnbBackdrop = $('#abnbBackdrop');
const abnbClose = $('#abnbClose');

function openAbnb() {
  airCalModal.classList.add('show');
  loadMonth(cur);
}
function closeAbnb() {
  airCalModal.classList.remove('show');
  clearSelection();
}

// закачаме към всичко с [data-open-cal] (и към стария id ако съществува)
$$('[data-open-cal], #openCalFromMenu, #openCalFromMenuDesktop').forEach(el=>{
  el.addEventListener('click', (e)=>{ e.preventDefault(); openAbnb(); });
});
abnbBackdrop.addEventListener('click', closeAbnb);
abnbClose.addEventListener('click', closeAbnb);

// --- Навигация
$('#abnbPrev').addEventListener('click', ()=>{ cur.setMonth(cur.getMonth()-1); loadMonth(cur); });
$('#abnbNext').addEventListener('click', ()=>{ cur.setMonth(cur.getMonth()+1); loadMonth(cur); });

// --- Рендер
async function loadMonth(d){
  const y = d.getFullYear(), m = pad(d.getMonth()+1);
  $('#abnbMonthLabel').textContent = d.toLocaleString('bg-BG',{month:'long', year:'numeric'});
  monthData = await getMonthDoc(`${y}-${m}`);
  renderGrid(d);
}

function renderGrid(d){
  const wrap = $('#abnbCal');
  wrap.innerHTML = '';

  // DOW header
  const dow = ['П','В','С','Ч','П','С','Н'];
  const grid = document.createElement('div');
  grid.className = 'abnb-grid';
  dow.forEach(w=>{
    const h = document.createElement('div'); h.className='abnb-dow'; h.textContent=w; grid.appendChild(h);
  });

  const year = d.getFullYear(), month = d.getMonth();
  const first = new Date(year, month, 1);
  const start = new Date(first); start.setDate(1 - ((first.getDay()+6)%7)); // понеделник начало
  for(let i=0;i<42;i++){
    const day = new Date(start); day.setDate(start.getDate()+i);
    const key = fmt(day);
    const cell = document.createElement('button');
    cell.type='button';
    cell.className = 'abnb-day';
    if(day.getMonth()!==month) cell.classList.add('out');
    if(fmt(new Date())===key) cell.classList.add('today');

    const data = monthData[key] || {};
    if(data.busy) cell.classList.add('busy');

    const num = document.createElement('div'); num.className='abnb-num'; num.textContent = day.getDate(); 
    const price = document.createElement('div'); price.className='abnb-price';
    if(typeof data.price==='number') price.textContent = data.price+' лв.';
    cell.append(num, price);

    // selection styles
    if(selStart && fmt(day)===fmt(selStart)) cell.classList.add('selected');
    if(selStart && selEnd && day>=floor(selStart) && day<=floor(selEnd)) cell.classList.add('in-range');

    cell.addEventListener('click', ()=>onPick(day));
    grid.appendChild(cell);
  }
  wrap.appendChild(grid);
}

function floor(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }

// --- Избор на диапазон (Airbnb UX)
function onPick(day){
  if(!selStart || (selStart && selEnd)){ selStart = floor(day); selEnd=null; }
  else if(day < selStart){ selEnd = selStart; selStart = floor(day); }
  else { selEnd = floor(day); }
  updateRangeUI();
  renderGrid(cur);
}

function updateRangeUI(){
  $('#abnbFrom').textContent = selStart ? fmt(selStart) : '—';
  $('#abnbTo').textContent   = selEnd ? fmt(selEnd) : (selStart?'…':'—');

  // показваме първата бележка/цена ако всички са еднакви
  const days = getSelectedKeys();
  const sample = uniformField(days,'note');  $('#abnbNote').value = sample ?? '';
  const p = uniformField(days,'price');      $('#abnbPrice').value = (typeof p==='number')? p : '';
}
function clearSelection(){ selStart=null; selEnd=null; updateRangeUI(); renderGrid(cur); }
$('#abnbClearSel').addEventListener('click', clearSelection);

function getSelectedKeys(){
  if(!selStart) return [];
  const end = selEnd || selStart;
  const out = [];
  for(let d=new Date(selStart); d<=end; d.setDate(d.getDate()+1)){
    out.push(fmt(d));
  }
  return out;
}
function uniformField(keys, field){
  if(keys.length===0) return null;
  let val = monthData[keys[0]]?.[field];
  for(const k of keys){ if((monthData[k]?.[field]) !== val) return null; }
  return val ?? null;
}

// --- Firestore
async function getMonthDoc(id){
  const snap = await db.collection(CAL_COLL).doc(id).get();
  return snap.exists && snap.data().days ? snap.data().days : {};
}
async function writeDays(keys, patch){
  if(keys.length===0) return;
  try{
    const buckets = {};
    for (const k of keys){
      const [y,m] = k.split('-'); const docId = `${y}-${m}`;
      (buckets[docId] ||= []).push(k);
    }
    const batch = db.batch();
    for (const [docId, ks] of Object.entries(buckets)){
      const ref = db.collection(CAL_COLL).doc(docId);
      const snap = await ref.get();
      const days = (snap.exists && snap.data().days) ? snap.data().days : {};
      ks.forEach(k=>{
        days[k] = { busy:false, price:null, note:null, ...(days[k]||{}), ...patch };
      });
      batch.set(ref, { days }, { merge:true });
    }
    await batch.commit();

    // локално обновяване
    for (const ks of Object.values(buckets)){
      ks.forEach(k=>{ monthData[k] = { ...(monthData[k]||{}), ...patch }; });
    }
    renderGrid(cur);
  }catch(e){
    console.error('Firestore write error:', e);
    alert('Нямаш права за запис или има грешка в базата: ' + (e?.message||e));
  }
}


// --- Действия (ADMIN)
$('#abnbMarkBusy').addEventListener('click', async ()=>{
  if(!isAdmin) return;
  await writeDays(getSelectedKeys(), { busy:true });
});
$('#abnbClearBusy').addEventListener('click', async ()=>{
  if(!isAdmin) return;
  await writeDays(getSelectedKeys(), { busy:false });
});
$('#abnbSaveNote').addEventListener('click', async ()=>{
  if(!selStart) return;
  const val = $('#abnbNote').value.trim() || null;
  await writeDays(getSelectedKeys(), { note: val });
});
$('#abnbSetPrice').addEventListener('click', async ()=>{
  if(!selStart) return;
  const raw = $('#abnbPrice').value.trim();
  const val = raw==='' ? null : Number(raw);
  await writeDays(getSelectedKeys(), { price: val });
});

// --- Интеграция с твоето Auth / синхрон с window.IS_ADMIN
function syncAdminFlag(){
  isAdmin = !!window.IS_ADMIN;                     // <-- чети глобалния флаг
  document.body.classList.toggle('admin', isAdmin);
}

// когато модалът се отваря – опресни статуса
function openAbnb() {
  syncAdminFlag();
  airCalModal.classList.add('show');
  loadMonth(cur);
}

// ако се смени потребителят – опресни след твоя checkAdmin
auth.onAuthStateChanged(() => setTimeout(syncAdminFlag, 0));

</script>

<script>
  /* ===== Auth & Admin ===== */
  window.IS_ADMIN = false;

  function setBadge(user, isAdmin){
    const badgeEl = document.getElementById('adminBadge');
    if (!badgeEl){ return; }
    if (!user){
      badgeEl.textContent = 'Статус: гост';
      return;
    }
    badgeEl.textContent = isAdmin ? `Админ: ${user.email}` : `Вход: ${user.email}`;
  }

  async function checkAdmin(user){
    try{
      const snap = await db.collection('meta').doc('admins').get();
      const data = snap.exists ? snap.data() : {};
      const uids   = Array.isArray(data.uids)   ? data.uids   : (Array.isArray(data.list) ? data.list : []);
      const emails = Array.isArray(data.emails) ? data.emails : [];
      const byUid   = user?.uid   && uids.includes(user.uid);
      const byEmail = user?.email && emails.map(s=>String(s).toLowerCase().trim())
                                           .includes(String(user.email).toLowerCase().trim());
      return !!(byUid || byEmail);
    }catch(e){
      console.error('checkAdmin:', e);
      return false;
    }
  }
auth.onAuthStateChanged(async (user)=>{
 document.body.classList.toggle('admin', !!user);

  if (!user){
    window.IS_ADMIN = false;
    setBadge(null,false);
    renderCal();
    return;
  }
  try {
    const isAdmin = await checkAdmin(user);
    window.IS_ADMIN = !!isAdmin;
    setBadge(user, isAdmin);
  } catch(e){
    console.error('Admin check failed:', e);
    window.IS_ADMIN = false;
  }
  renderCal();
});

  /* ===== Init ===== */

  </script>

  <!-- ===== Admin Drawer Logic ===== -->
  <script>
  const adminHotspot = document.getElementById('adminHotspot');
  const adminDrawer  = document.getElementById('adminDrawer');
  const adminClose   = document.getElementById('adminClose');

  function toggleAdminDrawer(force){
    const willShow = typeof force === 'boolean' ? force : !adminDrawer.classList.contains('show');
    adminDrawer.classList.toggle('show', willShow);
    adminDrawer.setAttribute('aria-hidden', String(!willShow));
  }

  adminHotspot.addEventListener('click', (e)=>{ e.stopPropagation(); toggleAdminDrawer(true); });
  adminClose.addEventListener('click',  ()=> toggleAdminDrawer(false));

  document.addEventListener('click', (e)=>{
    const clickInside = adminDrawer.contains(e.target) || adminHotspot.contains(e.target);
    if (!clickInside) toggleAdminDrawer(false);
  });

  const loginBtn  = document.getElementById('adminLogin');
  const logoutBtn = document.getElementById('adminLogout');

  if (loginBtn){
    loginBtn.addEventListener('click', async ()=>{
      toggleAdminDrawer(false);
      const email = prompt('Email за админ вход:');
      if (!email) return;
      const pass = prompt('Парола:');
      if (!pass) return;
      try{
        await auth.signInWithEmailAndPassword(email, pass);
      }catch(err){
        alert('Грешен вход: ' + err.message);
      }
    });
  }

  if (logoutBtn){
    logoutBtn.addEventListener('click', async ()=>{
      toggleAdminDrawer(false);
      try{ await auth.signOut(); }catch(e){ console.error(e); }
    });
  }
  </script>

  <!-- Контакти (fixed бутони) -->
  <div class="fixed-contacts">
    <a href="tel:+359988988623" class="contact-btn tel" aria-label="Обади се">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
        <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 011 1V21a1 1 0 01-1 1C10.29 22 2 13.71 2 3a1 1 0 011-1h4.5a1 1 0 011 1c0 1.25.2 2.46.57 3.59a1 1 0 01-.25 1.01l-2.2 2.19z"/>
      </svg>
    </a>

    <a href="https://wa.me/359988988623" target="_blank" class="contact-btn wa" aria-label="WhatsApp">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12 2a10 10 0 00-8.93 14.58l-1.07 3.92 4.02-1.06A10 10 0 1012 2zm5.2 14.3c-.27.77-1.57 1.48-2.18 1.57-.56.08-1.25.11-2.02-.13-.47-.15-1.07-.35-1.85-.73-3.27-1.62-5.39-5.41-5.55-5.67-.16-.27-1.32-1.76-1.32-3.36 0-1.6.84-2.38 1.14-2.71.3-.34.66-.42.88-.42h.63c.2 0 .47-.07.73.56.27.66.92 2.27 1 2.43.08.16.14.34.03.55-.1.2-.15.34-.3.53-.15.18-.32.4-.46.54-.15.15-.3.31-.13.6.16.27.71 1.17 1.52 1.9 1.04.93 1.9 1.22 2.18 1.36.27.14.43.12.6-.07.16-.2.69-.8.87-1.07.18-.27.36-.23.6-.14.25.09 1.57.74 1.84.88.27.14.45.2.52.31.07.11.07.8-.2 1.56z"/>
      </svg>
    </a>

    <a href="viber://chat?number=%2B359988988623" class="contact-btn viber" aria-label="Viber">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.031-.967-.273-.099-.472-.148-.67.15-.198.297-.767.966-.94 1.164-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.787-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.173.198-.298.298-.497.099-.198.05-.372-.025-.521-.074-.148-.669-1.611-.916-2.207-.242-.579-.487-.5-.67-.51-.173-.008-.372-.01-.57-.01-.198 0-.52.074-.792.372-.273.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.617h-.005C6.533 22 2 17.468 2 11.993 2 6.518 6.533 2 12.046 2c5.484 0 9.995 4.518 9.995 9.993 0 5.475-4.511 10.007-9.99 10.007z"/>
      </svg>
    </a>
  </div>

  <footer class="site-footer">
    <div class="footer-medal">
      <img src="medal.png" alt="Отличие LifeHouse Semkovo">
    </div>
  </footer>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const img = document.querySelector(".about-img img");
  if (!img) return;
  const observer = new IntersectionObserver((entries, o) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
        o.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });
  observer.observe(img);
});
  auth.onAuthStateChanged(async (user)=>{
  if (!user){
    window.IS_ADMIN = false;
    document.body.classList.remove('admin');
    setBadge(null,false);
    return;
  }
  const isAdmin = await checkAdmin(user);
  window.IS_ADMIN = !!isAdmin;
  document.body.classList.toggle('admin', isAdmin);
  setBadge(user, isAdmin);
});

</script>

<a href="https://webbadoo.com" class="footer-signature" target="_blank">© 2025 Design by <strong>webbadoo</strong></a>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const scrollArea = document.querySelector(".reviews-scroll");
  const items = document.querySelectorAll(".review-item");
  if (!scrollArea || !items.length) return;

  function revealOnScroll() {
    items.forEach(item => {
      const rect = item.getBoundingClientRect();
      const parentRect = scrollArea.getBoundingClientRect();
      if (rect.top < parentRect.bottom - 60) {
        item.classList.add("visible");
      }
    });
  }

  scrollArea.addEventListener("scroll", revealOnScroll);
  revealOnScroll(); // начална проверка
});
</script>
<div id="imgModal"><img src="" alt="Preview"></div>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const modal = document.getElementById("imgModal");
  const modalImg = modal.querySelector("img");
  document.querySelectorAll(".gallery-grid img").forEach(img => {
    img.addEventListener("click", () => {
      modalImg.src = img.src;
      modal.classList.add("show");
    });
  });
  modal.addEventListener("click", () => modal.classList.remove("show"));
});
</script>
<script>
  // 100vh корекция на мобилно (адресни ленти)
  function setVh(){ document.documentElement.style.setProperty('--vh', (window.innerHeight*0.01)+'px'); }
  setVh(); addEventListener('resize', setVh);

  // Маркираме, че клавиатурата е отворена → дава още място на панела
  (function(){
    const scope = document.getElementById('calendarModal') || document.querySelector('.calendar-modal,.cal-modal') || document;
    scope.addEventListener('focusin', (e)=> {
      if (e.target.matches('input, textarea, [contenteditable="true"]')) document.body.classList.add('kb-open');
    });
    scope.addEventListener('focusout', (e)=> {
      if (e.target.matches('input, textarea, [contenteditable="true"]')) document.body.classList.remove('kb-open');
    });
  })();
</script>
<script>
(() => {
  const thumbs = Array.from(document.querySelectorAll('.gallery-grid img'));
  const modal  = document.getElementById('imgModal');
  const modalImg = modal?.querySelector('img');
  if (!thumbs.length || !modal || !modalImg) return;

  let i = 0;

  // запомняме индекса при клик (използва се от навигацията)
  thumbs.forEach((img, idx) => {
    img.dataset.idx = idx;
    img.addEventListener('click', () => { i = idx; });
  });

  function showAt(idx){
    i = (idx + thumbs.length) % thumbs.length;
    modalImg.src = thumbs[i].src;
  }
  function next(){ showAt(i + 1); }
  function prev(){ showAt(i - 1); }

  // --- Стрелки в модала ---
  const prevBtn = document.createElement('button');
  prevBtn.className = 'img-nav img-prev';
  prevBtn.setAttribute('aria-label','Предишна');
  prevBtn.textContent = '‹';

  const nextBtn = document.createElement('button');
  nextBtn.className = 'img-nav img-next';
  nextBtn.setAttribute('aria-label','Следваща');
  nextBtn.textContent = '›';

  // да не затварят модала при клик
  [prevBtn, nextBtn].forEach(btn => btn.addEventListener('click', e => e.stopPropagation()));
  modal.appendChild(prevBtn);
  modal.appendChild(nextBtn);

  prevBtn.addEventListener('click', prev);
  nextBtn.addEventListener('click', next);

  // --- Скрол на десктоп (надолу → следваща; нагоре → предишна) ---
  modal.addEventListener('wheel', (e) => {
    if (!modal.classList.contains('show')) return;
    e.preventDefault();
    (e.deltaY > 0 ? next : prev)();
  }, { passive: false });

  // --- Клавиатура (само когато модалът е отворен) ---
  document.addEventListener('keydown', (e) => {
    if (!modal.classList.contains('show')) return;
    if (e.key === 'ArrowRight') { e.preventDefault(); next(); }
    if (e.key === 'ArrowLeft')  { e.preventDefault(); prev(); }
  });

  // --- Свайп на мобилно ---
  let touchX = null;
  modal.addEventListener('touchstart', (e) => {
    touchX = e.changedTouches?.[0]?.clientX ?? null;
  }, { passive: true });

  modal.addEventListener('touchend', (e) => {
    if (touchX == null) return;
    const dx = (e.changedTouches?.[0]?.clientX ?? touchX) - touchX;
    if (Math.abs(dx) > 40) (dx < 0 ? next : prev)();
    touchX = null;
  }, { passive: true });

  // при отваряне с клик от галерията показвай правилната снимка
  const observer = new MutationObserver(() => {
    if (modal.classList.contains('show')) showAt(i);
  });
  observer.observe(modal, { attributes: true, attributeFilter: ['class'] });
})();

</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const imgs = document.querySelectorAll('.gallery-grid img');
  const io = new IntersectionObserver((entries, obs) => {
    entries.forEach(en => {
      if (en.isIntersecting) {
        en.target.classList.add('visible');
        obs.unobserve(en.target);
      }
    });
  }, { threshold: 0.15 });
  imgs.forEach(img => io.observe(img));
});
</script>

</body>
</html>
